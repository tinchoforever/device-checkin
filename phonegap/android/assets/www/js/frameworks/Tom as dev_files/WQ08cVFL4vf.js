/*1364911468,178142497*/

if (self.CavalryLogger) { CavalryLogger.start_js(["qACMF"]); }

__d("ad-logging",["Arbiter","AsyncRequest","Banzai","collectDataAttributes","Parent","UFITrackingNodes"],function(a,b,c,d,e,f){var g='ssinfeed',h=b('Arbiter'),i=b('AsyncRequest'),j=b('Banzai'),k=b('collectDataAttributes'),l=b('Parent'),m=b('UFITrackingNodes'),n={};function o(r){return (r.getAttribute&&(r.getAttribute('ajaxify')||r.getAttribute('data-endpoint'))||r.action||r.href||r.name);}function p(r){var s=r.ei||r.ai;if(!s&&r.mei)s=r.mf_story_key;if(r!==null&&typeof(s)==="string"){if(r.tn){var t=r.tn.charAt(0),u=m.decodeTrackingInfo(t);if((u==m.types.LIKE_LINK)||(u==m.types.UNLIKE_LINK)||(u==m.types.COMMENT)||(u==m.types.ADD_COMMENT_BOX)||(u==m.types.SHARE_LINK))return;}var v=Date.now(),w=500;r.duplicate_click=!!n[s]&&(v-n[s]<w);n[s]=v;if(j.isEnabled('ssinfeed')){j.post(g,r,{delay:0,retry:j.isEnabled('ssinfeed_retry')});}else new i('/ajax/ssinfeed/end/').setData(r).setAllowCrossPageTransition(true).setMethod('POST').send();}}function q(r,s){if(!s.node)return;var t=o(s.node),u=l.byTag(s.node,'input')||l.byTag(s.node,'button');if(!t&&u&&u.type=="submit"&&u.getAttribute&&u.getAttribute('data-ft'))t="#";var v;if(t&&s.event&&(s.event.type==='click'||s.event.type==='contextmenu')){v=k(s.node,['ft']);v.ft.href=t;v.ft.mouse_type=s.event.type;p(v.ft);}}h.subscribe("ClickRefAction/new",q);});
__d("CalendarUI",["Event","Arbiter","AsyncRequest","CSS","DOM","DOMQuery","DOMScroll","Hovercard","Parent","Run","ScrollAwareDOM","Style","UIPagelet","Vector","ViewportBounds","$","copyProperties","ge","goURI"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('CSS'),k=b('DOM'),l=b('DOMQuery'),m=b('DOMScroll'),n=b('Hovercard'),o=b('Parent'),p=b('Run'),q=b('ScrollAwareDOM'),r=b('Style'),s=b('UIPagelet'),t=b('Vector'),u=b('ViewportBounds'),v=b('$'),w=b('copyProperties'),x=b('ge'),y=b('goURI');function z(){}w(z,{EVENT_ACTION:'EVENT_ACTION',SUGGESTIONS_LOADED:'SUGGESTIONS_LOADED',HIDE_SUGGESTED_EVENT:'HIDE_SUGGESTED_EVENT',_todayButton:null,_todayElement:null,_registeredReminders:false,init:function(){h.subscribe(this.EVENT_ACTION,function(){s.loadFromEndpoint('CalendarHeaderPagelet','pagelet_calendar_header');if(x('pagelet_calendar_invites'))s.loadFromEndpoint('CalendarInvitesPagelet','pagelet_calendar_invites');});var aa=u.addTop(function(){var ba=x('pagelet_calendar_header');if(ba&&r.isFixed(ba.firstChild)){var ca=ba.firstChild.getBoundingClientRect();return ca.bottom;}return 0;});p.onLeave(function(){aa.remove();});},initGridItem:function(aa,ba){g.listen(aa,'click',function(event){if(o.byTag(event.getTarget(),'a'))return;i.bootstrap(ba,aa.firstChild);return;});},initGridItemList:function(aa,ba,ca){h.subscribe(this.SUGGESTIONS_LOADED,function(da,ea){if(ba==ea.timestamp)for(var fa=0;fa<ca&&fa<ea.content.length;fa++)k.appendContent(aa,ea.content[fa]);});},initScrollItem:function(aa,ba){g.listen(aa,'click',this.scrollTo.bind(this,ba));},scrollTo:function(aa,ba){aa=l.isNode(aa)?aa:x(aa);var ca=0;if(aa){var da=t.getElementPosition(v('fbCalendarWrapper')).y,ea=t.getElementPosition(aa).y;ca=ea-da;}else ca=t.getElementPosition(v('bottomContent')).y;m.scrollTo(new t(0,ca,'document'),ba!==false);},initUnhide:function(aa,ba){g.listen(aa,'click',function(event){var ca=o.byClass(ba,'fbCalendarItem');k.remove(ba);j.removeClass(k.find(ca,'.fbHiddenCalendarItem'),'fbHiddenCalendarItem');});},registerHomepageReminders:function(){if(!this._registeredReminders){h.subscribe(this.EVENT_ACTION,function(aa,ba){if(x('pagelet_reminders'))s.loadFromEndpoint('RemindersPagelet','pagelet_reminders');});this._registeredReminders=true;}},registerTodayClickHandler:function(){this._todayButton.onclick=null;g.listen(this._todayButton,'click',this.scrollTo.bind(this,this._todayElement));},registerTodayElement:function(aa){this._todayElement=l.isNode(aa)?aa:x(aa);this._todayButton&&this.registerTodayClickHandler();},registerTodayButton:function(aa){this._todayButton=aa;this._todayElement&&this.registerTodayClickHandler();},registerEventLink:function(aa,ba){h.subscribe(this.EVENT_ACTION,function(ca,da){if(da.eid===ba){var ea=l.scry(v("facebook"),".fbCalendarSuggestedLabel");if(ea.length>0)j.addClass(ea[0],"hidden_elem");switch(da.action){case 'GOING':j.removeClass(aa.parentNode,"hidden_elem");j.removeClass(aa,"fbCalendarEventSuggested");j.addClass(aa,"fbCalendarEventGoing");break;case 'MAYBE':j.removeClass(aa.parentNode,"hidden_elem");j.removeClass(aa,"fbCalendarEventSuggested");j.removeClass(aa,"fbCalendarEventGoing");break;case 'DECLINED':case 'HIDDEN':n.hide(true);j.addClass(aa.parentNode,"hidden_elem");break;case 'EDITED':if(da.name)k.setContent(aa,da.name);if(da.day){var fa=x("pagelet_calendar_day_"+da.day);if(fa){var ga=l.find(fa,".fbCalendarGridEventList");if(l.scry(ga,"li").length>=4){j.addClass(aa.parentNode,"hidden_elem");s.loadFromEndpoint("CalendarDayPagelet","pagelet_calendar_day_"+da.day,{day:da.timestamp});}else k.prependContent(ga,aa.parentNode);}else j.addClass(aa.parentNode,"hidden_elem");}break;}}});},informEventGoing:function(aa){h.inform(this.EVENT_ACTION,{eid:aa,action:'GOING'});},informEventMaybe:function(aa){h.inform(this.EVENT_ACTION,{eid:aa,action:'MAYBE'});},informEventDeclined:function(aa){h.inform(this.EVENT_ACTION,{eid:aa,action:'DECLINED'});},informEventHidden:function(aa){h.inform(this.EVENT_ACTION,{eid:aa,action:'HIDDEN'});},informEventEdited:function(aa,ba,ca,da){h.inform(this.EVENT_ACTION,{eid:aa,action:'EDITED',name:ba,day:ca,timestamp:da});},informSuggestionsAdded:function(aa,ba){h.inform(this.SUGGESTIONS_LOADED,{timestamp:aa,content:ba});},removeCalendarListHeader:function(aa){var ba=k.scry(aa,"^.fbCalendarList .fbCalendarItem"),ca=k.find(aa,"^.fbCalendarItem");if(ba.length==1)ca=k.find(aa,"^.fbCalendarList");k.remove(ca);},reloadPage:function(){y(window.location);},unhide:function(aa){!function(){q.monitor(aa.nextSibling,j.show.curry(aa));}.defer();}});e.exports=z;});
__d("TooltipLink",["Parent","Tooltip"],function(a,b,c,d,e,f){var g=b('Parent'),h=b('Tooltip'),i={setTooltipText:function(j,k){j=g.byTag(j,'a');j&&h.set(j,k);}};e.exports=i;});
__d("ChatOnlineFriends",["Event","AvailableList","AvailableListConstants","ChannelConnection","Chat","ChatConfig","ChatVisibility","CSS","DataStore","DOM","MercuryParticipantTypes","OrderedFriendsList","Parent","Run","ShortProfiles","TooltipLink","XHPTemplate","copyProperties","createObjectFrom","cx","ChatTypeaheadBehavior","ChatTypeaheadCore","ChatTypeaheadDataSource","ChatTypeaheadRenderer","Typeahead"],function(a,b,c,d,e,f){var g=b('Event'),h=b('AvailableList'),i=b('AvailableListConstants'),j=b('ChannelConnection'),k=b('Chat'),l=b('ChatConfig'),m=b('ChatVisibility'),n=b('CSS'),o=b('DataStore'),p=b('DOM'),q=b('MercuryParticipantTypes'),r=b('OrderedFriendsList'),s=b('Parent'),t=b('Run'),u=b('ShortProfiles'),v=b('TooltipLink'),w=b('XHPTemplate'),x=b('copyProperties'),y=b('createObjectFrom'),z=b('cx');b('ChatTypeaheadBehavior');b('ChatTypeaheadCore');b('ChatTypeaheadDataSource');b('ChatTypeaheadRenderer');b('Typeahead');function aa(ca){switch(ca){case i.OFFLINE:return 'chatOffline';case i.IDLE:return 'chatIdle';case i.ACTIVE:return 'chatOnline';case i.MOBILE:return 'chatMobile';}}var ba=function(ca,da,ea,fa,ga,ha,ia){var ja=(fa&&ga)||(ha&&ia);if(ca&&da&&ea&&ja)this.init(ca,da,ea,fa,ga,ha,ia);};x(ba.prototype,{chatFriends:{},chatStatuses:['chatOnline','chatIdle','chatMobile','chatOffline'],_availableListSubscribe:function(event,ca){this._arbiterTokens.push(h.subscribe(event,ca));},_channelSubscribe:function(event,ca){this._arbiterTokens.push(j.subscribe(event,ca));},onunload:function(){this._arbiterTokens.forEach(function(ca){ca.unsubscribe();});},_setStatus:function(ca,da){if(n.hasClass(ca,da))return;this.chatStatuses.forEach(function(ea){n.conditionClass(ca,ea,ea==da);});},initTypeahead:function(ca,da,ea){ca.subscribe('reset',function(){n.show(da);});ca.subscribe('query',function(fa,ga){n.conditionShow(da,!ga.value);});if(ea)ca.subscribe(['query','reset'],function(fa){n.conditionShow(ea,fa==='reset');});},init:function(ca,da,ea,fa,ga,ha,ia){this.maxElements=ca;this._faceTmpl=ga;this._arbiterTokens=[];this._root=ea;t.onLeave(this.onunload.bind(this));var ja=p.scry(ea,'.chatUpgradeLink');this.initTypeahead(da,fa||ha,ja[0]);var ka=p.find(ea,'.sidebarBtn');g.listen(ka,'click',function(event){k.toggleSidebar();event.kill();});this._faceFutures&&this._hideAllFaces();this._faceFutures=[];this._orderedFriends=r.getList();this._hashedFriends=y(this._orderedFriends);this._availableListSubscribe(i.ON_AVAILABILITY_CHANGED,this.update.shield(this));this.update.bind(this).defer();this._channelSubscribe(j.CONNECTED,this.update.shield(this));this._channelSubscribe(j.RECONNECTING,this._handleChannelReconnecting.bind(this));this._channelSubscribe(j.SHUTDOWN,this._handleChannelShutdown.bind(this));this._channelSubscribe([j.MUTE_WARNING,j.UNMUTE_WARNING],this.update.shield(this));if(fa){this._facepile=fa.firstChild;g.listen(fa,'click',this.clickHandler.bind(this));}else{this._miniDivebar=ha;this._divebarTmpl=ia;}g.listen(p.find(ea,'.fbChatGoOnlineLink'),'click',function(event){if(j.disconnected()){k.openBuddyList();}else m.goOnline(k.openBuddyList);event.kill();}.bind(this));g.listen(p.find(ea,'.fbChatReconnectLink'),'click',function(event){if(j.disconnected())j.reconnect();event.kill();}.bind(this));h.update();},_updateMiniDivebar:function(){var ca=Math.min(this._orderedFriends.length,10),da=[];for(var ea=0;ea<ca;ea++)da.push(this._renderDivebarItem(this._orderedFriends[ea]));p.setContent(this._miniDivebar,da);},_renderDivebarItem:function(ca){var da=this._divebarTmpl.build(),ea=da.getNode('anchor'),fa=da.getNode('status'),ga=h.get(ca);if(ga===i.ACTIVE){n.addClass(fa,'active');}else if(ga===i.MOBILE)n.addClass(fa,'mobile');u.get(ca,function(ha){da.setNodeContent('name',ha.name).setNodeProperty('profile-photo','src',ha.thumbSrc);g.listen(ea,'click',function(){var ia={source:'online_friends',mode:'miniDivebar'};k.openTab(ca,null,q.FRIEND,ia);return false;});});return da.getRoot();},_handleChannelReconnecting:function(ca,da){var ea=(da<1000),fa=p.find(this._root,'.fbChatReconnectLink'),ga=p.find(this._root,'.fbChatReconnecting');n.conditionShow(fa,!ea);n.conditionShow(ga,ea);},_handleChannelShutdown:function(){var ca=p.find(this._root,'.fbChatReconnectLink'),da=p.find(this._root,'.fbChatReconnecting');n.hide(ca);n.hide(da);},update:function(){var ca=j.disconnected(),da=m.isOnline();n.conditionClass(this._root,'disconnected',ca);if(this._facepile){n.conditionShow(this._facepile,da);da&&this._updateFacepile(ca);}else da&&this._updateMiniDivebar();var ea=p.find(this._root,'.typeaheadContainer');n.conditionShow(ea,da);if(l.get('chat_upgrade_link')){var fa=p.find(this._root,'.chatUpgradeLink');n.conditionShow(fa,da);}var ga=p.find(this._root,'.chatGoOnlineLink');n.conditionShow(ga,!da);var ha=p.find(this._root,'.chatReconnectLink');n.conditionShow(ha,da&&ca);},_updateFacepile:function(ca){h.getAvailableIDs().forEach(function(ja){if(!this._hashedFriends[ja]){this._orderedFriends.push(ja);this._hashedFriends[ja]=true;}}.bind(this));var da=0;for(var ea=0;ea<this._orderedFriends.length;ea++){var fa=this._orderedFriends[ea],ga=h.get(fa),ha=this._faceFutures[ea],ia=(ca||ga!==i.OFFLINE)&&(da<this.maxElements);if(ia){if(!ha){ha=this._makeFace(ea);this._faceFutures[ea]=ha;}da++;}this._updateFace(ha,ia,aa(ga));}},_updateFace:function(ca,da,ea){ca&&ca(function(fa){this._setStatus(fa,ea);n.conditionShow(fa,da);}.bind(this));},_makeFace:function(ca){var da=null,ea=null,fa=this._orderedFriends[ca];u.get(fa,function(ga){ea=this._faceTmpl.render();o.set(ea,'friendID',fa);var ha=w.getNode(ea,'img'),ia=ha.cloneNode(false);ia.setAttribute('src',ga.thumbSrc);p.replace(ha,ia);var ja=w.getNode(ea,'anchor');v.setTooltipText(ja,ga.name);da&&da(ea);var ka=false;for(var la=ca+1;la<this._orderedFriends.length&&!ka;la++){var ma=this._faceFutures[la],na=ma&&ma();if(na){this._facepile.insertBefore(ea,na);ka=true;}}if(!ka)this._facepile.appendChild(ea);}.bind(this));return function ga(ha){if(ha)if(ea){ha(ea);}else da=ha;return ea;};},clickHandler:function(event){var ca=event.getTarget(),da=s.byClass(ca,"_43q7");if(da){var ea=o.get(da,'friendID');if(ea&&m.isOnline()){var fa={source:'online_friends',mode:'miniDivebar'};k.openTab(ea,null,q.FRIEND,fa);return false;}}},_hideAllFaces:function(){this._faceFutures.forEach(function(ca){ca&&ca(function(da){p.remove(da);});});}});e.exports=ba;});
__d("UIComposer",["Animation","Arbiter","ArbiterMixin","AsyncRequest","CSS","DOM","ErrorDialog","Event","HTML","Run","Style","TextAreaControl","UIIntentionalStreamMessage","copyProperties","emptyFunction","tx"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('ArbiterMixin'),j=b('AsyncRequest'),k=b('CSS'),l=b('DOM'),m=b('ErrorDialog'),n=b('Event'),o=b('HTML'),p=b('Run'),q=b('Style'),r=b('TextAreaControl'),s=b('UIIntentionalStreamMessage'),t=b('copyProperties'),u=b('emptyFunction'),v=b('tx');function w(x,y,z,aa){if(!x)throw new Error('UIComposer instantiated with no root.');this.root=x;this.id=x.id;this.input=y;this.user=z;this.options=aa;this.resetState=this.root.className;this.extraSubmitData={};w.storeInstance(x.id,this);p.onLeave(function(){delete w.instances[x.id];});this.isOnHomepage=aa.isOnHomepage;if(aa.isOnHomepage&&this.textAreaFocused()){this.ensureInitialized(true);}else if(aa.autoload)this.ensureInitialized(false);}t(w.prototype,i,{ensureInitialized:function(x){if(this.initialized)return;this.initialized=true;this.initialize(x);},initialize:function(x){var y={contentArea:null,endpoint:'/ajax/updatestatus.php',autoload:null,autoloadData:null,targetID:0,contextData:{},placeholder:null,maxInputLength:0,sourceAppID:null};t(this,t(y,this.options));this.shouldHide=true;this.submitButton=l.scry(this.root,'label.UIComposer_SubmitButton input')[0]||null;var z=l.scry(this.root,'form')[0];if(z)l.replace(z,l.scry(z,'div.UIComposer_Content')[0]);this.initializeTextarea(y.maxInputLength);this.initializeEvents();},initializeTextarea:function(x){new r(this.input).setMaxLength(x).setAutogrow(true);this.input.onfocus='';},initializeEvents:function(){n.listen(this.input,'focus',this.focus.bind(this));n.listen(this.submitButton,'click',this.post.bind(this));if(this.options.supportsHiding){var x=function(){this.shouldHide=false;}.bind(this);n.listen(this.root,'click',x);n.listen(this.root,'mousedown',x);n.listen(document.body,'click',function(){if(this.shouldHide)this.blur();this.shouldHide=true;}.bind(this));}},focus:function(){this.ensureInitialized(true);var x=this.getMessage().trim();if(!x||x==this.placeholder){k.removeClass(this.input,'DOMControl_placeholder');this.clearMessage();}h.inform(s.SET_AUTO_INSERT,{pause:true});if(this.isOnHomepage)k.removeClass(this.root,'hide_buttons');this.addState(w.STATE.INPUT_FOCUSED);this.inform(w.EVENT.FOCUS,{});return this;},blur:function(){h.inform(s.SET_AUTO_INSERT,{pause:false});this.inform(w.EVENT.BLUR,{});return this;},setSourceAppId:function(x){this.sourceAppID=x;return this;},getSourceAppId:function(){return this.sourceAppID;},reset:function(x,y,z){this.resetSubmitButtonText();this.enable();if(x)this.resetMessage();if(y!==false){this.focusInput();}else this.removeState(w.STATE.INPUT_FOCUSED);this.shouldHide=true;this.inform(w.EVENT.RESET,{});return this;},addState:function(x){k.addClass(this.root,x);return this;},removeState:function(x){k.removeClass(this.root,x);return this;},hasState:function(x){return k.hasClass(this.root,x);},toggleState:function(x){k.toggleClass(this.root,x);return this;},disable:function(){this.input.disabled=true;return this.addState(w.STATE.INPUT_DISABLED).disableButton();},enable:function(){this.input.disabled=false;return this.removeState(w.STATE.INPUT_DISABLED).enableButton();},disableButton:function(){this.disabled=true;k.addClass(this.submitButton.parentNode,'uiButtonDisabled');return this;},enableButton:function(){this.disabled=false;k.removeClass(this.submitButton.parentNode,'uiButtonDisabled');return this;},getData:function(){var x=this.getEndpoint(),y={},z=this.getMessage();if(!this.isValidPost())return null;t(y,this.targetID>0?w.TARGET_DATA:w.HOME_DATA);t(y,{status:z,target_id:this.targetID,profile_id:this.user,app_id:this.sourceAppID,privacy_data:{}});t(y,this.extraSubmitData);if(y){y.composer_id=this.id;y.hey_kid_im_a_composer=true;if(this.contextData)t(y,this.contextData);}return y;},setExtraSubmitData:function(x,y){this.extraSubmitData['composer_'+x]=y;return this;},clearExtraSubmitData:function(x){delete this.extraSubmitData['composer_'+x];return this;},isValidPost:function(){var x=this.getMessage();if(x==this.placeholder)return false;if(this.endpoint==this.getEndpoint()&&!x)return false;return true;},getEndpoint:function(){return this.endpoint;},post:function(){if(this.disabled||!this.initialized)return false;this._post();return false;},_post:function(){var x=this.getEndpoint(),y=this.getData();if(!y)return false;this.disable();var z=new j().setURI(x).setData(y).setHandler(this.handleResponse.bind(this)).setErrorHandler(this.handleError.bind(this)).setFinallyHandler(this.enable.bind(this));for(var aa in this.contextData)z.setContextData(aa,this.contextData[aa]);z.send();},handleError:function(x){this.shouldHide=false;this.reset();m.show(x.getErrorSummary(),x.getErrorDescription()||"There was an application error. Please try again later.");},handleResponse:function(x){this.extraSubmitData={};var y=x.getError(),z=x.getErrorIsWarning(),aa=x.getPayload();this.reset(true,false,true).publish(x);if(y&&z)m.showAsyncError(x);},publish:function(x){var y=this.contentArea;if(y&&y.addContent){var z=x,aa,ba;if(x.getPayload){var ca=x.getPayload();aa=ca.status;z=ca.markup;if(ca.payload_is_content)ba=ca;}ba=ba||o(z).getRootNode();var da=500;y.addContent(ba,da);if(y.setStatus&&aa)setTimeout(function(){y.setStatus(aa);},da);}return this;},getContextData:function(){return this.contextData;},resetMessage:function(){k.addClass(this.input,'DOMControl_placeholder');q.set(this.input,'height','');this.setMessage(this.placeholder);},clearMessage:function(){this.setMessage('');},getMessage:function(){return this.input.value.trim();},setMessage:function(x){this.input.value=x;},resetSubmitButtonText:function(){if(this.orig_button_text)this.setSubmitButtonText(this.orig_button_text);},setSubmitButtonText:function(x){if(x)if(this.submitButton&&this.submitButton.value){this.orig_button_text=this.orig_button_text||this.submitButton.value;this.submitButton.value=x;}},focusInput:function(){this.input.select();this.input.focus();},textAreaFocused:function(){var x=l.scry(this.root,'textarea.UIComposer_TextArea')[0];return !k.hasClass(x,'DOMControl_placeholder');}});t(w,{instances:{},getInstance:function(x){return this.instances[x];},storeInstance:function(x,y){this.instances[x]=y;},focusInstance:function(x){var y=this.instances,z=y[x];if(!z)return;p.onLoad(function(){y[x].focus();setTimeout(function(){y[x].input.focus();},0);});},animation:function(x,y){return new g(x).ondone(y||u).ease(g.ease.end).duration(200);}});t(w,{DIALOG_WIDTH:560,DIALOG_WIDTH_PIC:620,APP_ID_POSTED:2309869772,HOME_DATA:{action:'HOME_UPDATE',home_tab_id:1,profile_id:null,status:null,target_id:null},TARGET_DATA:{action:'PROFILE_UPDATE',profile_id:null,status:null,target_id:null},STATE:{PIC_NONE:'UIComposer_STATE_PIC_NONE',PIC_INSIDE:'UIComposer_STATE_PIC_INSIDE',PIC_OUTSIDE:'UIComposer_STATE_PIC_OUTSIDE',INPUT_FOCUSED:'UIComposer_STATE_INPUT_FOCUSED',INPUT_DISABLED:'UIComposer_STATE_INPUT_DISABLED'},EVENT:{FOCUS:'focus',BLUR:'blur',RESET:'reset'}});e.exports=w;});
__d("legacy:DOMPosition",["DOMPosition"],function(a,b,c,d){var e=b('DOMPosition');a.DOMPosition=e;},3);
__d("legacy:UIControllerRegistry",[],function(a,b,c,d){a.__UIControllerRegistry=a.__UIControllerRegistry||{};},3);
__d("legacy:dom-scroll",["DOMScroll"],function(a,b,c,d){a.DOMScroll=b('DOMScroll');},3);
__d("FutureSideNavItem",["Arbiter","CSS","DOM","Parent","$","copyProperties","createArrayFrom"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('Parent'),k=b('$'),l=b('copyProperties'),m=b('createArrayFrom');function n(o,p){this.id=o.id;this.up=p;this.endpoint=o.endpoint;this.type=o.type;this.node=o.node||k(o.id);this.paths=o.path?m(o.path):[];this.keys=o.key?m(o.key):[];var q=this._findKeys(this.keys);this.numericKey=q.numeric||this.keys[0];this.textKey=q.text||this.keys[0];this._pathPattern=this._buildRegex(this.paths);this._keyPattern=this._buildRegex(this.keys);this.hideLoading();this.hideSelected();}l(n.prototype,{equals:function(o){return o&&o.id===this.id;},getLinkNode:function(){return (i.scry(this.node,'a.item')[0]||i.scry(this.node,'a.subitem')[0]);},matchPath:function(o){return this._matchInput(this._pathPattern,o);},matchKey:function(o){return this._matchInput(this._keyPattern,o);},_matchInput:function(o,p){var q=o&&o.exec(p);return q&&q.slice(1);},getTop:function(){return this.isTop()?this:this.up.getTop();},isTop:function(o){return !this.up;},setCount:function(o,p){return this._updateCount(o,true);},incrementCount:function(o,p){return this._updateCount(o,false);},_updateCount:function(o,p,q){var r=i.scry(this.node,'span.count')[0],s=r&&i.scry(r,'span.countValue')[0];if(s){var t=p?0:parseInt(i.getText(s),10),u=Math.max(0,t+o),v=this.isTop()?'hidden':'hiddenSubitem';i.setContent(s,u);q&&h.conditionClass(this.node,v,!u);h.conditionClass(r,'hidden_elem',!u);if(this.isTop()){var w=i.scry(this.node,'div.linkWrap')[0];if(w){h.conditionClass(w,'noCount',!u);h.conditionClass(w,'hasCount',u);}}}g.inform('NavigationMessage.COUNT_UPDATE_DONE');},showLoading:function(){h.addClass(this.node,'loading');},hideLoading:function(){h.removeClass(this.node,'loading');},showSelected:function(){h.addClass(this.node,'selectedItem');h.hasClass(this.node,'hider')&&h.addClass(this._getExpanderParent(),'expandedMode');},hideSelected:function(){h.removeClass(this.node,'selectedItem');},showChildren:function(){h.addClass(this.node,'open');},hideChildren:function(){h.removeClass(this.node,'open');},_getExpanderParent:function(){return j.byClass(this.node,'expandableSideNav');},_buildRegex:function(o){if(o.length){var p=o.map(function(q){if(typeof q==="string"){return q.replace(/([^a-z0-9_])/ig,'\\$1');}else if(q&&q.regex)return q.regex;});return new RegExp('^(?:'+p.join('|')+')$');}},_findKeys:function(o){var p=/^(app|group|fl)_/,q={};for(var r=0;r<o.length;r++){var s=p.test(o[r]);if(s&&!q.numeric){q.numeric=o[r];}else if(!s&&!q.text)q.text=o[r];if(q.numeric&&q.text)break;}return q;}});e.exports=n;});
__d("legacy:FutureSideNavItem",["FutureSideNavItem"],function(a,b,c,d){a.FutureSideNavItem=b('FutureSideNavItem');},3);
__d("FutureSideNavSection",["Bootloader","DOMQuery","$","copyProperties"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('DOMQuery'),i=b('$'),j=b('copyProperties');function k(l){this.id=l.id;this.node=this.node||i(l.id);this.editEndpoint=l.editEndpoint;}j(k.prototype,{equals:function(l){return l&&l.id===this.id;},getEditorAsync:function(l){g.loadModules(['SortableSideNav'],function(m){var n=new m(h.find(this.node,'ul.uiSideNav'),this.editEndpoint);l(n);}.bind(this));}});e.exports=k;});
__d("legacy:FutureSideNavSection",["FutureSideNavSection"],function(a,b,c,d){a.FutureSideNavSection=b('FutureSideNavSection');},3);
__d("NewHigh",["CSS","DOM","UIComposer"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('UIComposer'),j={reset:function(){this.initialized=false;},ensureInitialized:function(){if(this.initialized)return;this.button=h.scry(document.body,'a.stream_header_button')[0];this.composer=h.scry(document.body,'div.UIComposer')[0];this.buttonArea=h.scry(this.composer,'div.UIComposer_ButtonArea')[0];this.initialized=true;},showComposer:function(k){this.ensureInitialized();if(this.composer){g.show(this.composer);i.focusInstance(this.composer.id);var l=i.getInstance(this.composer.id);l&&l.loadAttachment(parseInt(k,10));}this.button&&g.hide(this.button);},hideComposer:function(k){this.ensureInitialized();if(this.composer){var l=i.getInstance(this.composer.id);if(!k){l&&l.initialized&&l.blur();g.hide(this.composer);this.button&&g.show(this.button);}else{l&&l.initialized&&l.loadAttachment(0);g.show(this.composer);this.buttonArea&&g.hide(this.buttonArea);}}}};e.exports=j;});
__d("legacy:new-highlights-js",["NewHigh"],function(a,b,c,d){a.NewHigh=b('NewHigh');},3);
__d("legacy:Toggler",["Toggler"],function(a,b,c,d){a.Toggler=b('Toggler');},3);
__d("FutureSideNav",["event-extensions","Arbiter","Bootloader","ChannelConstants","CSS","DOM","FutureSideNavItem","FutureSideNavSection","NavigationMessage","PageTransitions","Parent","Run","Selector","URI","UserAgent","Vector","copyProperties","createArrayFrom"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('Bootloader'),i=b('ChannelConstants'),j=b('CSS'),k=b('DOM'),l=b('FutureSideNavItem'),m=b('FutureSideNavSection'),n=b('NavigationMessage'),o=b('PageTransitions'),p=b('Parent'),q=b('Run'),r=b('Selector'),s=b('URI'),t=b('UserAgent'),u=b('Vector'),v=b('copyProperties'),w=b('createArrayFrom');function x(){x.instance&&x.instance.uninstall();x.instance=this;}x.instance=null;x.getInstance=function(){return x.instance||new x();};v(x.prototype,{init:function(y,z,aa){this.root=y;this.items={};this.sections={};this.editor=null;this.editing=false;this.selected=null;this.loading=null;this.keyParam='sk';this.defaultKey=z;this.uri=s.getRequestURI();this.ajaxPipe=aa;this.ajaxPipeEndpoints={};this.sidecol=true;this._installed=true;this._handlePageTransitions=true;o.registerHandler(function(ba){return this._handlePageTransitions&&this.handlePageTransition(ba);}.bind(this));this._eventHandlers=[];this._arbiterSubscriptions=[g.subscribe(n.NAVIGATION_COMPLETED,this.navigationComplete.bind(this)),g.subscribe(n.NAVIGATION_FAILED,this.navigationFailed.bind(this)),g.subscribe(n.NAVIGATION_COUNT_UPDATE,this.navigationCountUpdate.bind(this)),g.subscribe(n.NAVIGATION_SELECT,this.navigationSelect.bind(this)),g.subscribe(i.getArbiterType('nav_update_counts'),this.navigationCountUpdateFromPresence.bind(this))];this._explicitHover=[];this._ensureHover('sideNavItem');this._eventHandlers.push(Event.listen(window,'resize',this._handleResize.bind(this)));this._checkNarrow();this._selectorSubscriptions=[];window.Selector&&this._selectorSubscriptions.push(r.subscribe(['open','close'],function(ba,ca){var da=p.byClass(ca.selector,'sideNavItem');da&&j.conditionClass(da,'editMenuOpened',ba==='open');}));q.onLeave(this.uninstall.bind(this));if(this._pendingSections)this._pendingSections.forEach(function(ba){this.initSection.apply(this,ba);}.bind(this));},_handleResize:(function(){var y;return function(){y&&clearTimeout(y);y=this._checkNarrow.bind(this).defer(200);};})(),_checkNarrow:function(){j.conditionClass(this.root,'uiNarrowSideNav',u.getElementPosition(this.root).x<20);},_ensureHover:function(y){if(t.ie()<8)h.loadModules(['ExplicitHover'],function(z){this._explicitHover.push(new z(this.root,y));}.bind(this));},uninstall:function(){if(this._installed){this._installed=false;this._handlePageTransitions=false;this._arbiterSubscriptions.forEach(g.unsubscribe);this._selectorSubscriptions.forEach(function(y){r.unsubscribe(y);});this._eventHandlers.forEach(function(y){y.remove();});this._explicitHover.forEach(function(y){y.uninstall();});}},initSection:function(y,z){if(!this._installed){this._pendingSections=this._pendingSections||[];this._pendingSections.push(arguments);return;}this._initItems(z);this._initSection(y);},addItem:function(y,z){this._initItem(y,z);},_initItems:function(y){var z=function(aa,ba){var ca=this._initItem(aa,ba);if(aa.children)aa.children.forEach(function(da){z(da,ca);});}.bind(this);w(y).forEach(function(aa){z(aa,null);});},_initItem:function(y,z){var aa=this.items[y.id]=this._constructItem(y,z);if(aa.equals(this.selected)||y.selected)this.setSelected(aa);var ba=aa.getLinkNode();ba&&this._eventHandlers.push(Event.listen(ba,'click',function(event){return !this.editing;}.bind(this)));return aa;},_initSection:function(y){var z=this.sections[y.id]=this._constructSection(y);this._eventHandlers.push(Event.listen(z.node,'click',this.handleSectionClick.bind(this,z)));k.scry(z.node,'div.bookmarksMenuButton').forEach(j.show);return z;},_constructItem:function(y,z){return new l(y,z);},_constructSection:function(y){return new m(y);},handleSectionClick:function(y,event){var z=this._getEventTarget(event,'a'),aa=this._getItemForNode(z);if(!z){return;}else if(j.hasClass(z.parentNode,'uiMenuItem')){this._handleMenuClick(y,aa,z.parentNode,event);}else this._handleLinkClick(y,z,event);},_getEventTarget:function(event,y){var z=event.getTarget();if(z.tagName!==y.toUpperCase()){return p.byTag(z,y);}else return z;},_handleMenuClick:function(y,z,aa,event){if(j.hasClass(aa,'rearrange'))this.beginEdit(y);},_handleLinkClick:function(y,z,event){if(j.hasClass(z,'navEditDone')){this.editing?this.endEdit():this.beginEdit(y);event.kill();}},getItem:function(y){if(this._isCurrentPath(y)){return this._getItemForKey(this._getKey(y.getQueryData())||this.defaultKey);}else return this._getItemForPath(y.getPath());},getNodeForKey:function(y){var z=this._getItemForKey(y);if(z)return z.node;},_isCurrentPath:function(y){return y.getDomain()===this.uri.getDomain()&&y.getPath()===this.uri.getPath();},_getKey:function(y){return y[this.keyParam];},_getItemForNode:function(y){y=p.byClass(y,'sideNavItem');return y&&this.items[y.id];},_getItemForKey:function(y){return this._findItem(function(z){return z.matchKey(y);});},_getItemForPath:function(y){return this._findItem(function(z){return z.matchPath(y);});},_findItem:function(y){for(var z in this.items)if(y(this.items[z]))return this.items[z];},removeItem:function(y){if(y&&this.items[y.id]){k.remove(y.node);delete this.items[y.id];}},removeItemByKey:function(y){this.removeItem(this._getItemForKey(y));},moveItem:function(y,z,aa){var ba=k.find(y.node,'ul.uiSideNav');(aa?k.prependContent:k.appendContent)(ba,z.node);},setLoading:function(y){this.loading&&this.loading.hideLoading();this.loading=y;this.loading&&this.loading.showLoading();},setSelected:function(y){this.setLoading(null);if(this.selected){this.selected.hideSelected();this.selected.getTop().hideChildren();}this.selected=y;if(this.selected){this.selected.showSelected();this.selected.getTop().showChildren();}},handlePageTransition:function(y){var z=this.getItem(y),aa=z&&z.endpoint&&this._doPageTransition(z,y);return aa;},_doPageTransition:function(y,z){this.setLoading(y);this._sendPageTransition(y.endpoint,v(this._getTransitionData(y,z),z.getQueryData()));return true;},_sendPageTransition:function(y,z){z.endpoint=y;g.inform(n.NAVIGATION_BEGIN,{useAjaxPipe:this._useAjaxPipe(y),params:z});},_getTransitionData:function(y,z){var aa={};aa.sidecol=this.sidecol;aa.path=z.getPath();aa[this.keyParam]=y.textKey;aa.key=y.textKey;return aa;},_useAjaxPipe:function(y){return this.ajaxPipe||this.ajaxPipeEndpoints[y];},navigationComplete:function(){this.loading&&this.setSelected(this.loading);},navigationFailed:function(){this.setLoading(null);},navigationSelect:function(y,z){var aa=this._getItemForKey(this._getKey(z));if(z.asLoading){this.setLoading(aa);}else this.setSelected(aa);},navigationCountUpdate:function(y,z){var aa=this._getItemForKey(z&&z.key);if(aa)if(typeof z.count!=="undefined"){aa.setCount(z.count,z.hide);}else if(typeof z.increment!=="undefined")aa.incrementCount(z.increment,z.hide);},navigationCountUpdateFromPresence:function(y,z){z=z.obj;if(z)if(!z.class_name||z.class_name&&j.hasClass(this.root,z.class_name))if(z.items)for(var aa=0;aa<z.items.length;aa++)this.navigationCountUpdate(y,z.items[aa]);},beginEdit:function(y){if(!this.editing){this.editing=true;j.addClass(this.root,'editMode');this._updateTrackingData();this._initEditor(y);}},endEdit:function(){if(this.editing){j.removeClass(this.root,'editMode');this.editor&&this.editor.endEdit();this.editor=null;this.editing=false;this._updateTrackingData();}},_updateTrackingData:function(y){var z=this.root.getAttribute('data-gt')||"{}";try{z=JSON.parse(z);if(this.editing){z.editing=true;}else delete z.editing;this.root.setAttribute('data-gt',JSON.stringify(z));}catch(aa){}},_initEditor:function(y){y.getEditorAsync(function(z){if(this.editing){this.editor=z;this.editor.beginEdit();}}.bind(this));}});e.exports=x;});
__d("legacy:ui-side-nav-future-js",["FutureSideNav"],function(a,b,c,d){a.FutureSideNav=b('FutureSideNav');},3);
__d("legacy:ui-side-nav-message",["NavigationMessage"],function(a,b,c,d){a.NavigationMessage=b('NavigationMessage');},3);
__d("UIIntentionalStreamRefresh",["Arbiter","LiveTimer","Run","UIIntentionalStreamMessage","UserActivity","coalesce","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('LiveTimer'),i=b('Run'),j=b('UIIntentionalStreamMessage'),k=b('UserActivity'),l=b('coalesce'),m=b('copyProperties');function n(o,p){this.isAutoRefreshing=false;this.lastRefresh=Date.now();n.instance=this;this.setAutoRefreshConfig(o);this.updateConfigHandler=g.subscribe(j.UPDATE_AUTOREFRESH_CONFIG,this.updateAutoRefreshConfig.bind(this));this.updateRefreshTimeHandler=g.subscribe(j.UPDATE_LAST_REFRESH_TIME,this.updateLastRefreshTime.bind(this));i.onLeave(this.unload.bind(this));this.userActivity();this.uaToken=k.subscribe(this.userActivity.bind(this));this.autoRefreshInterval=setInterval(this.checkAutoPageRefresh.bind(this),this.checkAutoRefreshTimeInterval);this.activeRefreshInterval=setInterval(this.checkActiveRefresh.bind(this),this.checkActiveRefreshTimeInterval);this.enableAutoRefresh(p);g.subscribe(j.UPDATE_STREAM,h.loop.bind(h,true));g.subscribe(j.REFRESH_STREAM,h.loop.bind(h,true));}m(n,{DISABLE_AUTOREFRESH_TIME:4*60*1000,CHECK_AUTOREFRESH_INTERVAL:5*60*1000,AUTOREFRESH_INACTIVE_TIME:30*60*1000,CHECK_ACTIVE_REFRESH_TIME:5*60*1000,ACTIVE_REFRESH_TIME:30*1000});m(n.prototype,{updateAutoRefreshConfig:function(o,p){if(o==j.UPDATE_AUTOREFRESH_CONFIG)this.setAutoRefreshConfig(p);},updateLastRefreshTime:function(o){if(o==j.UPDATE_LAST_REFRESH_TIME)this.lastRefresh=Date.now();},setAutoRefreshConfig:function(o){o=o||{};var p=24*60*60*1000;if(!this.storyInterval)this.storyInterval=l(o.story_interval,null);this.allowAutoRefresh=l(o.allow_auto_refresh,false);this.inactiveThreshold=l(o.inactive_threshold,0);this.activeRefreshTime=l(o.fast_refresh_rate,p);this.inactiveRefreshTime=l(o.slow_refresh_rate,p);this.allowPolling=l(o.allow_polling,false);this.refreshFactor=l(o.refresh_factor,10);this.minRefreshInterval=l(o.min_refresh_interval,60*1000);this.activeRefresh=l(o.active_refresh,false);this.checkActiveRefreshTimeInterval=l(o.check_active_refresh_interval,n.CHECK_ACTIVE_REFRESH_TIME);this.activeRefreshTimeInterval=l(o.active_refresh_interval,n.ACTIVE_REFRESH_TIME);this.disableAutoRefreshTime=l(o.disable_autorefresh_time,n.DISABLE_AUTOREFRESH_TIME);this.checkAutoRefreshTimeInterval=l(o.check_autorefresh_time_interval,n.CHECK_AUTOREFRESH_INTERVAL);this.autoRefreshInactiveTime=l(o.autorefresh_inactive_time,n.AUTOREFRESH_INACTIVE_TIME);return this;},unload:function(){this.enableAutoRefresh(false);this.cleanupRefreshInterval();k.unsubscribe(this.uaToken);this.updateConfigHandler&&this.updateConfigHandler.unsubscribe();this.updateRefreshTimeHandler&&this.updateRefreshTimeHandler.unsubscribe();},userActivity:function(){var o=this.isInactive();this.lastActivity=Date.now();this.isAutoRefreshing=true;if(o&&this.canAutoRefresh())this.runAutoRefresh();return true;},isInactive:function(){return this.getMSSinceLastActivity()>this.inactiveThreshold;},getMSSinceLastActivity:function(){return Date.now()-this.lastActivity;},getMSSinceLastRefresh:function(){return Date.now()-this.lastRefresh;},getRefreshInterval:function(){if(this.isInactive()){return this.inactiveRefreshTime;}else if(this.storyInterval!=null){var o=this.storyInterval*this.refreshFactor;return Math.max(o,this.activeRefreshTime);}else return this.activeRefreshTime;},canAutoRefresh:function(){return this.isAutoRefreshing&&this.allowAutoRefresh;},cancelUpdate:function(){if(this.updateTask){clearTimeout(this.updateTask);this.updateTask=null;}},runUpdatePoll:function(){this.updateTask=null;if(this.canAutoRefresh())this.runAutoRefresh();},runAutoRefresh:function(){var o=50;if(this.getMSSinceLastRefresh()>=this.minRefreshInterval-o)g.inform(j.UPDATE_STREAM);this.schedulePoll(this.getRefreshInterval());},schedulePoll:function(o){this.cancelUpdate();if(this.allowPolling)this.updateTask=setTimeout(this.runUpdatePoll.bind(this),o);},enableAutoRefresh:function(o,p){this.isAutoRefreshing=o;if(o){var q=p?0:this.getRefreshInterval();this.schedulePoll(q);}else this.cancelUpdate();},checkAutoPageRefresh:function(){if(!this.allowAutoRefresh)return;if(this.isAutoRefreshing&&(this.getMSSinceLastActivity()>this.disableAutoRefreshTime))this.isAutoRefreshing=false;if(this.getMSSinceLastRefresh()<this.autoRefreshInactiveTime)return;var o=this.getMSSinceLastActivity();if(o>this.autoRefreshInactiveTime)g.inform(j.REFRESH_STREAM,{});},checkActiveRefresh:function(){if(!this.allowAutoRefresh)return;if(this.getMSSinceLastRefresh()<this.activeRefreshTimeInterval)return;if(this.getMSSinceLastActivity()<this.activeRefreshTimeInterval)g.inform(j.UPDATE_STREAM);},cleanupRefreshInterval:function(){if(this.autoRefreshInterval){clearInterval(this.autoRefreshInterval);this.autoRefreshInterval=null;}if(this.activeRefreshInterval){clearInterval(this.activeRefreshInterval);this.activeRefreshInterval=null;}}});e.exports=n;});
__d("UIIntentionalStream",["Animation","Arbiter","AsyncRequest","AsyncResponse","CSS","DataStore","DOM","DOMScroll","Event","HTML","JSLogger","NavigationMessage","OnVisible","PageTransitions","Run","ScrollAwareDOM","Style","UIIntentionalStreamMessage","UIIntentionalStreamRefresh","UIPagelet","URI","Vector","$","clickRefAction","coalesce","copyProperties","createArrayFrom","ge","isEmpty","merge","reportData","startsWith","userAction"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('AsyncResponse'),k=b('CSS'),l=b('DataStore'),m=b('DOM'),n=b('DOMScroll'),o=b('Event'),p=b('HTML'),q=b('JSLogger'),r=b('NavigationMessage'),s=b('OnVisible'),t=b('PageTransitions'),u=b('Run'),v=b('ScrollAwareDOM'),w=b('Style'),x=b('UIIntentionalStreamMessage'),y=b('UIIntentionalStreamRefresh'),z=b('UIPagelet'),aa=b('URI'),ba=b('Vector'),ca=b('$'),da=b('clickRefAction'),ea=b('coalesce'),fa=b('copyProperties'),ga=b('createArrayFrom'),ha=b('ge'),ia=b('isEmpty'),ja=b('merge'),ka=b('reportData'),la=b('startsWith'),ma=b('userAction');function na(){h.subscribe(x.SET_AUTO_INSERT,oa);}function oa(qa,ra){if(qa!=x.SET_AUTO_INSERT)return;var sa=pa.instance;if(sa)sa.pauseAutoInsert=ra.pause;}function pa(qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab){if(!qa)throw new Error('UIIntentionalStream instantiated with no root.');fa(this,{id:qa.id,root:qa,instanceName:ra,newest:sa,oldest:ta,oldestMR:ta,shouldShowHidden:false,defaultFilter:ua,currentFilterKey:za,sourceType:va,lastSeenTime:ab,hasPendingRefresh:false,pauseAutoInsert:false,error:m.scry(qa,'div.UIIntentionalStream_Error')[0],pager:m.scry(qa,'div.uiMorePager')[0],filterNullState:m.scry(qa,'div.friendListFilterNullState')[0],streamContent:m.find(qa,'.UIIntentionalStream_Content'),requestNum:0,scrollLoadCount:1,maxScrollLoadCount:1,scrollPosition:0,lastViewStateID:0,cachedScrollQID:0,jslog:q.create('stream'),scrollListener:null});this.addScrollTrace('init',{});u.onLeave(this.unload.bind(this));if(!pa.instances)pa.instances={};pa.instances[ra]=this;pa.instance=this;na();this.setupSubscriptions();}fa(pa.prototype,{subscribeToComposerPublish:function(){this.subscriptions.push(h.subscribe('composer/publish',function(event,qa){if(qa.streamStory)this.addComposerContent(qa.streamStory,500);}.bind(this)));},setupSubscriptions:function(){this.subscriptions=[];this.subscribeToComposerPublish();this.subscriptions.push(h.subscribe(x.UPDATE_STREAM,this.updateStream.bind(this)));this.subscriptions.push(h.subscribe(x.REFRESH_STREAM,this.refreshStream.bind(this)));this.scrollListener=o.listen(window,'scroll',this.checkFirstScroll.bind(this));this.checkFirstScroll();u.onLoad(this.checkFirstStory.bind(this));},tearDownSubscriptions:function(){if(!this.subscriptions)return;this.subscriptions.forEach(h.unsubscribe);this.subscriptions=null;if(this.scrollListener){this.scrollListener.remove();this.scrollListener=null;}},unload:function(){this.addScrollTrace('unload',{});h.inform(x.UNLOAD);this.tearDownSubscriptions();pa.instance=null;pa.instances[this.instanceName]=null;this.clearScrollLoader(true);window.disableScrollLoad=null;y.instance&&y.instance.unload();},_getUpdateInsertType:function(){return pa.REFRESH_PREPEND;},updateStream:function(qa){if(qa!=x.UPDATE_STREAM||this.hasPendingRefresh||this.isAutoRefreshPaused())return;this.loadNewer({showLoader:false,ignoreSelf:true,insertType:this._getUpdateInsertType()});},clearScrollLoader:function(qa){if(this.currentScrollListener){this.currentScrollListener.remove();this.currentScrollListener=null;}if(qa||this.scrollLoadCount>=this.maxScrollLoadCount)window.disableScrollLoad=true;},loadOlderPosts:function(qa){var ra={filter:this.getCurrentFilterKey(),oldest:this.oldest,oldestMR:this.oldestMR,last_seen_time:this.lastSeenTime,scroll_count:this.scrollLoadCount,scroll_position:this.scrollPosition,last_viewstate_id:this.lastViewStateID,cached_scroll_qid:this.cachedScrollQID};this.homeloadID&&(ra.homeload_id=this.homeloadID);ra=ja(ra,qa);this.loadWithParams(ra);},loadWithParams:function(qa){var ra=m.scry(this.root,'div.fbStreamPager.hasMorePosts')[0];if(ra){if(k.hasClass(ra,'async_saving'))return;k.addClass(ra,'async_saving');}this.addScrollTrace('loadwithparams',qa);z.loadFromEndpoint('MoreStoriesPagelet','home_stream',qa,{append:true,usePipe:true});},setScrollLoadCount:function(qa){this.maxScrollLoadCount=qa;},setHomeloadID:function(qa){this.homeloadID=qa;},loadMoreOnScroll:function(qa,ra){if(window.disableScrollLoad)return;var sa=function(){if(window.disableScrollLoad)return;var va=a.ArbiterMonitor;if(va){da('scroll',null,null,'FORCE',{gt:{ua_id:'stream:scroll:auto'}}).set_namespace('stream');var wa=ma('stream').uai('scroll','stream:scroll:auto');va.initUA(wa);}var xa={delay_load_count:ra};this.loadOlderPosts(xa);}.bind(this),ta=m.scry(this.root,'ul.uiStream li.genericStreamStory');if(!ta.length)return;this.addScrollTrace('loadmoreonscroll',{});var ua=ta[ta.length-qa-1];if(ua){this.currentScrollListener=new s(ua,sa,null,0);}else sa();},updateTimeRange:function(qa,ra){if(!this.newest||this.newest<qa){this.newest=qa;this.addScrollTrace('update_newest',{newest:this.newest});}if(!this.oldest||(ra&&(ra<this.oldest))){this.oldest=ra;this.addScrollTrace('update_oldest',{oldest:this.oldest});}},updateOldestMR:function(qa){if(!this.oldestMR||qa<this.oldestMR){this.oldestMR=qa;this.addScrollTrace('update_oldestmr',{oldestmr:this.oldestMR});}},updateScrollPosition:function(qa){this.scrollPosition=qa;this.addScrollTrace('update_scrollposition',{scrollposition:this.scrollPosition});},updateLastViewStateID:function(qa){this.lastViewStateID=qa;this.addScrollTrace('update_lastviewstateid',{lastviewstateid:this.lastViewStateID});},updateCachedScrollQID:function(qa){this.cachedScrollQID=qa;this.addScrollTrace('update_cachedscrollqid',{qid:this.cachedScrollQID});},getID:function(){return this.id;},getCurrentFilterKey:function(){if(this.currentFilterKey)return this.currentFilterKey;var qa=aa.getMostRecentURI().getQueryData();if(qa&&qa.sk){this.currentFilterKey=qa.sk;}else if(qa&&qa.filter){this.currentFilterKey=qa.filter;}else if(this.defaultFilter)this.currentFilterKey=this.defaultFilter;return this.currentFilterKey;},resetFilterKey:function(qa){this.currentFilterKey=qa;},loadOlder:function(qa){qa=qa||{};if(!this.oldest)return;var ra=this.getCurrentParams();ra.oldest=this.oldest;this.refresh(pa.REFRESH_APPEND,ra,qa);return this;},loadNewer:function(qa){if(!this.newest)return;qa=qa||{};var ra=this.getCurrentParams();ra.newest=this.newest;if(qa.ignoreSelf)ra.ignore_self=true;ra.load_newer=true;var sa=ea(qa.insertType,pa.REFRESH_PREPEND);this.refresh(sa,ra,qa);return this;},checkFirstStory:function(){this.logFirstStory('first_story_load');},checkFirstScroll:function(){if(this.scrollListener&&ba.getScrollPosition().y>0){this.scrollListener.remove();this.scrollListener=null;this.logFirstStory('first_scrolling');}},logFirstStory:function(qa){if(!ha('home_stream')||!ha('home_stream').childElementCount||!ha('home_stream').children[0].getAttribute('data-ft'))return;var ra=ha('home_stream').children[0].getAttribute('data-ft'),sa=JSON.parse(ra);if(!(("mf_story_key" in sa)&&("qid" in sa)))return;var ta={mf_story_key:sa.mf_story_key,qid:sa.qid};ka(qa,{ft:ta});},getCurrentParams:function(){var qa={},ra=aa.getMostRecentURI().getQueryData();ra.filter=this.getCurrentFilterKey();var sa=this.getValidParams();if(sa){sa.forEach(function(ta){qa[ta]=ra[ta];});}else qa=ra;return qa;},setHomeFilter:function(qa){this._homeFilter=qa;},setHomeFilterLoading:function(qa){if(this._homeFilter)this._homeFilter.setLoading(qa);},refresh:function(qa,ra,sa){h.inform(x.UPDATE_LAST_REFRESH_TIME);this.homeloadID&&(ra.homeload_id=this.homeloadID);this.addScrollTrace('refresh',{type:qa,data:ra,kwargs:sa});this.currentFilterKey=ra.filter;if(ra.filter==pa.FEED_FILTER_KEY_DUAL_NEWS_FEED){this.currentFilterKey=this.defaultFilter;}else if(pa.isHighlightsFilter(ra.filter)||ra.filter===pa.FEED_FILTER_KEY_NEWS_FEED)this.defaultFilter=this.currentFilterKey;sa=sa||{};var ta=++this.requestNum,ua=ea(sa.showLoader,true),va=this.instanceName,wa=function(ab){pa.getInstance(va).handleResponse(ta,qa,ab,sa);},xa=function(ab){pa.getInstance(va).handleError(ta,qa,ab,sa);},ya=function(ab){pa.getInstance(va).handleFinally(qa,ra.filter,ab);};if(!(ra.request_type=qa))ra.request_type='none';if(ra.filter){sa.show_hidden=ra.show_hidden?ra.show_hidden:false;}else sa.show_hidden=this.shouldShowHidden;ra=fa(this.getCurrentParams(),ra);this.hasPendingRefresh=true;var za;if(qa==pa.REFRESH_APPEND&&ua)za=this.pager;new i().setURI(this.getEndpoint()).setReadOnly(true).setOption('retries',0).setMethod(this.getRefreshMethod()).setData(ra).setHandler(wa).setStatusElement(za).setErrorHandler(xa).setFinallyHandler(ya).send();if(qa==pa.REFRESH_TRANSITION){if(this.pager)this.pager.style.display='none';this.clearScrollLoader();this.oldest=this.newest=null;}if(ua)this.setHomeFilterLoading(true);},addComposerContent:function(qa,ra){if(this.isOnNewsFeedFilter())k.addClass(qa,'uiStreamBoulderHighlight');this.addContentPrepend(qa,ra);},addContentPrepend:function(qa,ra){if(qa.length){ga(qa).reverse().forEach(function(xa){this.addContentPrepend(xa,ra);}.bind(this));return;}var sa,ta=ba.getScrollPosition().y,ua=ba.getElementPosition(this.streamContent).y,va=this.scrollOnPrepend&&ta>=ua;if(va){var wa=function(xa){var ya=m.find(xa,'^li.uiStreamStory');if(!ya)return;l.set(ya,'origHeight',ya.offsetHeight);o.listen(xa,'load',function(){var za=l.get(ya,'origHeight');if(ya.offsetHeight!=za){window.scrollBy(0,ya.offsetHeight-za);l.set(ya,'origHeight',ya.offsetHeight);}});};sa=g.insert.curry(this.streamContent,qa,(function(xa,ya){m.prependContent(this.streamContent,ya);h.inform('reflow');window.scrollBy(0,ya.offsetHeight);m.scry(ya,'img').forEach(wa);}).bind(this));}else sa=(function(){w.set(qa,'opacity',0);v.prependContent(this.streamContent,qa);h.inform('reflow');new g(qa).from('opacity',0).to('opacity',1).duration(400).ondone(function(){h.inform(x.UPDATE_HTML_CONTENT);}).go();}).bind(this);if(ra){k.hide(qa);m.appendContent(document.body,qa);setTimeout(function(){k.show(qa);sa();},ra);}else sa();},addContentAppend:function(qa){m.appendContent(this.streamContent,qa);},handleResponse:function(qa,ra,sa,ta){this.addScrollTrace('handle_response',{requestnum:qa,type:ra,kwargs:ta});ta=ta||{};var ua=sa.getPayload();this.filterNullState&&m.remove(this.filterNullState);if(ia(ua))return;if(ua.autoRefreshConfig)h.inform(x.UPDATE_AUTOREFRESH_CONFIG,ua.autoRefreshConfig);this.setHomeFilterLoading(false);if(ra==pa.REFRESH_EXPAND){var va=m.find(ca(ta.expandStoryID),'div.UIIntentionalStory_CollapsedStories');k.hide(va);k.removeClass(va,'UIIntentionalStory_CollapsedStoriesLoading');}if(this.error)this.error.style.display='none';if(qa!=this.requestNum)return;if('show_hidden' in ta)this.shouldShowHidden=ta.show_hidden;if('newestStoryTime' in ua&&ua.newestStoryTime>this.newest)this.newest=ua.newestStoryTime;if(ra!=pa.REFRESH_PREPEND){if('oldestStoryTime' in ua&&(!this.oldest||ua.oldestStoryTime<this.oldest))this.oldest=ua.oldestStoryTime;if('scrollPosition' in ua)this.scrollPosition=ua.scrollPosition;if('lastViewStateID' in ua)this.lastViewStateID=ua.lastViewStateID;if('oldestMRStoryTime' in ua)this.oldestMR=ua.oldestMRStoryTime;if('cachedScrollQID' in ua){this.cachedScrollQID=ua.cachedScrollQID;}else this.cachedScrollQID=0;}if(ua.html){var wa=p(ua.html).getNodes();switch(ra){case pa.REFRESH_PREPEND:this.addContentPrepend(wa);break;case pa.REFRESH_APPEND:this.addContentAppend(wa);this.clearScrollLoader(true);break;case pa.REFRESH_TRANSITION:m.setContent(this.streamContent,wa);this.scrollLoadCount=1;if(!ta.noScroll)n.scrollTo(new ba(0,0,"document"),false);break;case pa.REFRESH_EXPAND:m.insertAfter(ca(ta.expandStoryID),wa);break;case pa.DELAYED_STREAM:this.addContentAppend(wa);break;}h.inform(x.UPDATE_HTML_CONTENT);}},handleError:function(qa,ra,sa,ta){if(qa!=this.requestNum)return;this.setHomeFilterLoading(false);var ua=sa.getError();if(ua==1357001)j.defaultErrorHandler(sa);if(ra==pa.REFRESH_EXPAND){var va=m.find(ca(ta.expandStoryID),'div.UIIntentionalStory_CollapsedStories');k.removeClass(va,'UIIntentionalStory_CollapsedStoriesLoading');}if(!ta.delayLoadCount&&ra!=pa.REFRESH_PREPEND&&this.error)w.set(this.error,'display','block');},handleFinally:function(qa,ra){if(qa==pa.REFRESH_TRANSITION){t.transitionComplete();h.inform(r.NAVIGATION_COMPLETED);}this.hasPendingRefresh=false;},getValidParams:function(){return pa.VALID_PARAMS;},getEndpoint:function(){return pa.ENDPOINT;},getRefreshMethod:function(){return pa.REFRESH_METHOD;},isOnNewHighlights:function(){var qa=this.getCurrentFilterKey();return (pa.isHighlightsFilter(qa)||(qa==pa.FEED_FILTER_KEY_DUAL_NEWS_FEED&&pa.isHighlightsFilter(this.defaultFilter)));},isLiveStreamBox:function(){var qa=this.getCurrentFilterKey();return qa&&qa.indexOf(pa.FEED_FILTER_KEY_LIVE_STREAM_BOX)===0;},isOnNewsFeedFilter:function(){var qa=this.getCurrentFilterKey();return (qa==pa.FEED_FILTER_KEY_NEWS_FEED||pa.isHighlightsFilter(qa)||qa==pa.FEED_FILTER_KEY_DUAL_NEWS_FEED);},isAutoRefreshPaused:function(){if(this.isOnNewHighlights()||this.isLiveStreamBox())return false;return this.pauseAutoInsert;},addScrollTrace:function(qa,ra){this.jslog.debug(qa,ra);},refreshStream:function(qa,ra){if(qa!=x.REFRESH_STREAM)return;var sa=this.getCurrentFilterKey(),ta={filter:sa},ua={filter:sa};ra.noScroll&&(ua.noScroll=1);this.refresh(pa.REFRESH_TRANSITION,ta,ua);},getNewest:function(){return this.newest;}});fa(pa,{ANIMATION_DURATION:300,REFRESH_METHOD:'GET',REFRESH_TRANSITION:1,REFRESH_PREPEND:2,REFRESH_APPEND:3,REFRESH_EXPAND:5,DELAYED_STREAM:6,FEED_FILTER_KEY_NEW_HIGHLIGHTS:'h',FEED_FILTER_KEY_NEWS_FEED:'lf',FEED_FILTER_KEY_DUAL_NEWS_FEED:'nf',FEED_FILTER_KEY_LIVE_STREAM_BOX:'pub',VALID_PARAMS:['filter','show_hidden'],ENDPOINT:'/ajax/intent.php',getInstance:function(qa){return pa.instances[qa];},isHighlightsFilter:function(qa){if(!qa)return false;return la(qa,pa.FEED_FILTER_KEY_NEW_HIGHLIGHTS);},getStoriesByAssoc:function(qa){return m.scry(pa.instance.root,'div.aid_'+qa);}});e.exports=pa;});
__d("legacy:UIIntentionalStream",["UIIntentionalStream"],function(a,b,c,d){a.UIIntentionalStream=b('UIIntentionalStream');},3);
__d("legacy:UIPagelet",["UIPagelet"],function(a,b,c,d){a.UIPagelet=b('UIPagelet');},3);
function FutureHomeSideNav(){this.parent.construct(this);}Class.extend(FutureHomeSideNav,'FutureSideNav');copyProperties(FutureHomeSideNav.prototype,{init:function(){this.parent.init.apply(this,arguments);this.ajaxPipe=true;this.seeAllEndpoint="/ajax/home/generic.php";this.typeSections={favorites:'pinnedNav',profiles:'pinnedNav',apps:'appsNav',groups:'groupsNav',pages:'pagesNav',lists:'listsNav',interests:'interestsNav',connect_apps:'connectNav'};this.switchingFromTitanFixedFrame=false;this._arbiterSubscriptions.push(Arbiter.subscribe('titan_fixed_frame_changed',this.handleFixedFrameChanged.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_FAVORITE_UPDATE,this.updateFavorite.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_FIRST_RESPONSE,this.navigationFirstResponse.bind(this)));this._ensureHover('homeSideNav');},initMoreLink:function(a){this._eventHandlers.push(Event.listen(a,'click',this._showMoreSections.bind(this,a)));},_showMoreSections:function(a){var b=DOM.scry(this.root,'div.belowThreshold');CSS.hide(a);b.forEach(function(c){CSS.removeClass(c,'belowThreshold');});},handleFixedFrameChanged:function(a,b,c){if(b){var d=function(e,f){var g=DOMPosition.getElementPosition(ge(f)).y;UIPagelet.loadFromEndpoint(e,f,{fixed_frame:b,selected_key:c,v_pos:g});};d('PinnedNavigationPagelet','pagelet_pinned_nav');d('BookmarkNavigationPagelet','pagelet_bookmark_nav');if(ge('chatFriendsOnline'))CSS.hide(ge('chatFriendsOnline'));}else this.switchingFromTitanFixedFrame=true;},handlePageTransition:function(a){if(this.switchingFromTitanFixedFrame){this.switchingFromTitanFixedFrame=false;return false;}else return this.parent.handlePageTransition(a);},_initSection:function(a){var b=this.parent._initSection(a);for(var c in this.typeSections){var d=this.typeSections[c];if(b.id==d){var e=DOM.scry(b.node,'h4.navHeader')[0];if(e){var f='\/bookmarks\/('+c+')(\/)?';b.seeall=this._initItem({node:e,id:b.id,endpoint:this.seeAllEndpoint,key:['bookmarks'],path:[{regex:f}]});}}}return b;},_constructItem:function(a,b){return new FutureHomeSideNavItem(a,b);},_constructSection:function(a){return new FutureHomeSideNavSection(a);},getSection:function(a){return this.typeSections[a]&&this.sections[this.typeSections[a]];},_getItemForKey:function(a){var b=this.parent._getItemForKey("nf");if(b&&b.matchKey(a)){return b;}else return this.parent._getItemForKey(a);},_isCurrentPath:function(a){return ((a.getDomain()===this.uri.getDomain())&&(a.getPath()==='/'||a.getPath()==='/home.php'));},_handleMenuClick:function(a,b,c,event){if(CSS.hasClass(c,'favorite')){Arbiter.inform(NavigationMessage.NAVIGATION_FAVORITE_UPDATE,{key:b.numericKey,favorite:!a.equals(this.getSection("favorites")),movetop:CSS.hasClass(c,'movetop')});}else this.parent._handleMenuClick(a,b,c,event);},removeItemByKey:function(a){Arbiter.inform(NavigationMessage.NAVIGATION_ITEM_REMOVED,a);this.parent.removeItemByKey(a);},toggleItemByKey:function(a,b){var c=this.getNodeForKey(a);if(!b){Arbiter.inform(NavigationMessage.NAVIGATION_ITEM_HIDDEN,a);c&&CSS.hide(c);}else c&&CSS.show(c);var d=this._getItemForKey(a);this.getSection(d.type).refresh();},removeItem:function(a){var b=this.getSection(a.type);this.parent.removeItem(a);b.refresh();},updateFavorite:function(a,b){var c=this._findItem(function(l){return l.matchKey(b.key)&&l.canFavorite();}),d=this.getSection("favorites"),e=emptyFunction,f=b.favorite?d.addEndpoint:d.removeEndpoint;if(b.movetop)f=d.editEndpoint;if(!c&&(b.favorite||b.movetop)){if(b.movetop)var g=DOM.scry(this.root,'.expandableSideNav'),h=g&&g.length&&CSS.hasClass(g[0],'expandedMode');e=function(){UIPagelet.loadFromEndpoint('PinnedNavigationPagelet','pagelet_pinned_nav',{expanded:h});};}else if(!c){e=function(){UIPagelet.loadFromEndpoint('BookmarkNavigationPagelet','pagelet_bookmark_nav');};}else{if(b.movetop){CSS.show(c.node);this.moveItem(d,c);var i=Parent.byClass(c.node,'uiSideNav');if(i&&i.childNodes.length){var j=Parent.byClass(DOM.scry(i,'.sortableItem')[0],'sideNavItem');DOM.insertBefore(j,c.node);CSS.removeClass(c.node,'hidden');}}else{var k=this.getSection(c.type);if(b.favorite){CSS.show(c.node);this.moveItem(d,c);c.showFavorite();}else if(!k.equals(d)){this.moveItem(k,c,true);c.hideFavorite();}else this.removeItem(c);k.refresh();}d.refresh();b.key=c.numericKey;Arbiter.inform('NavigationMessage.FAVORITES_UPDATED');}new AsyncRequest().setURI(f).setData({id:b.key,movetop:b.movetop}).setHandler(e).send();},_doPageTransition:function(a,b){this._unloadStreams();var c=this.parent._doPageTransition(a,b);if(c&&(a.type=='groups'||a.type=='lists'||a.type=='interests')){a.setCount(0);a.hideUnreadDot();}return c;},_unloadStreams:function(){var a=window.UIIntentionalStream&&UIIntentionalStream.instances,b=['nile','global','friends','blade'];a&&b.forEach(function(c){a[c]&&a[c].unload();});},navigationFirstResponse:function(){this.setSelected(this.loading);}});function FutureHomeSideNavSection(a){this.parent.construct(this,a);this.editEndpoint='/ajax/bookmark/edit/';this.addEndpoint='/ajax/bookmark/add/';this.removeEndpoint='/ajax/bookmark/delete/';}Class.extend(FutureHomeSideNavSection,'FutureSideNavSection');copyProperties(FutureHomeSideNavSection.prototype,{refresh:function(){var a=DOM.scry(this.node,'li.sideNavItem'),b=DOM.scry(this.node,'div.actionLinks'),c=a.some(CSS.shown);CSS.conditionShow(DOM.find(this.node,'h4.navHeader'),c);b.length&&CSS.conditionShow(b[0],c);}});function FutureHomeSideNavItem(a,b){this.parent.construct(this,a,b);}Class.extend(FutureHomeSideNavItem,'FutureSideNavItem');copyProperties(FutureHomeSideNavItem.prototype,{canFavorite:function(){return !!this._getFavoriteLabel();},showFavorite:function(){DOM.setContent(this._getFavoriteLabel(),"Remove from Favorites");},hideFavorite:function(){DOM.setContent(this._getFavoriteLabel(),"Add to Favorites");},hideUnreadDot:function(){var a=DOM.scry(this.node,'img.unreadDot')[0];a&&CSS.hide(a);},_getFavoriteLabel:function(){return DOM.scry(this.node,'li.favorite span.itemLabel')[0];}});
__d("FeedBaseKeyboardController",["$","Arbiter","CSS","DOM","DOMScroll","DOMQuery","Event","Focus","Keys","NavigationMessage","Parent","Run","Vector","ViewportBounds","copyProperties","ge","throttle"],function(a,b,c,d,e,f){var g=b('$'),h=b('Arbiter'),i=b('CSS'),j=b('DOM'),k=b('DOMScroll'),l=b('DOMQuery'),m=b('Event'),n=b('Focus'),o=b('Keys'),p=b('NavigationMessage'),q=b('Parent'),r=b('Run'),s=b('Vector'),t=b('ViewportBounds'),u=b('copyProperties'),v=b('ge'),w=b('throttle'),x=74,y=75,z=76,aa=67,ba;function ca(ea){this.root=ea;this.init();}function da(){ba=i.hasClass(document.documentElement,'tinyViewport')?0:g('pagelet_bluebar').offsetTop+g('pagelet_bluebar').offsetHeight;}da.defer();m.listen(window,'resize',w(da));u(ca.prototype,{getStories:function(){},getParentStory:function(ea){},isStory:function(ea){},getHeadline:function(ea){},getPreviousStory:function(ea){},getNextStory:function(ea){},setSelected:function(ea){},clickLike:function(){},clickComment:function(){},getScrollOffset:function(){return 10;},getAnimationLength:function(ea){return Math.min(Math.abs(s.getElementPosition(ea).y-t.getTop()-document.body.scrollTop),400);},findTop:function(){var ea=this.getStories();for(var fa=0;fa<ea.length;fa++)if(s.getElementPosition(ea[fa]).y>s.getScrollPosition().y)return ea[fa];},onLeave:function(){this.keydownListener&&this.keydownListener.remove();this.focusinListener&&this.focusinListener.remove();this.navigationListener&&h.unsubscribe(this.navigationListener);},init:function(){r.onLeave(this.onLeave.bind(this));this.navigationListener=h.subscribe(p.NAVIGATION_BEGIN,this.onLeave.bind(this));this.keydownListener=m.listen(document,'keydown',function(ea){var fa=m.getKeyCode(ea);if(ea.getModifiers().any)return true;var ga=this.getParentStory(document.activeElement);if((fa!=x)&&(fa!=y)&&!ga)return true;if(this.isInteractive(document.activeElement))return true;switch(fa){case o.DOWN:case x:this.vert(1);break;case o.UP:case y:this.vert(-1);break;case z:this.clickLike();break;case aa:this.clickComment();break;case o.RETURN:if(this.selected.id=='pagelet_composer'){var ha=j.scry(this.selected,'textarea')[0];ha&&n.set(ha);}else this.clickComment();break;default:return;}this.hasUsedKeyboard=true;ea.preventDefault();}.bind(this));this.focusinListener=m.listen(document,'focusin',function(ea){var fa=ea.getTarget(),ga=this.getParentStory(fa);if(ga&&(this.selected!=ga)){this.setSelected(ga);if(!this.isInteractive(fa))this.setFocused(ga);}}.bind(this));},click:function(ea){if(this.selected){var fa=l.scry(this.selected,ea);if((fa.length==1)&&i.shown(fa[0]))fa[0].click();}},vert:function(ea){var fa;if(!this.selected){fa=this.findTop();}else{if(this.selected.id=='pagelet_composer'){fa=ea>0?this.getStories()[0]:null;}else fa=ea>0?this.getNextStory(this.selected):(this.getPreviousStory(this.selected)||v('pagelet_composer'));if(!fa){return;}else if(!l.isElementNode(fa)){i.removeClass(this.selected,'selectedStorySimple');this.selected=fa;return this.vert(ea);}}this.anim&&this.anim.stop();var ga=(Date.now()-(this.lastScroll||0)>30);this.anim=k.scrollTo(fa,ga?this.getAnimationLength(fa):0,false,s.getViewportDimensions().y-ba-this.getScrollOffset(),this.setFocused.bind(this,fa));this.setSelected(fa);this.lastScroll=Date.now();},isInteractive:function(ea){return ((ea.nodeName=='INPUT')||(ea.nodeName=='BUTTON')||(ea.nodeName=='TEXTAREA')||(ea.nodeName=='A')||q.byAttribute(ea,'contenteditable'));},setTabindexOnHeadline:function(ea,fa){if(this.isStory(ea)){var ga=this.getHeadline(ea);if(ga)ga.tabIndex=fa;}},setFocused:function(ea){if(this.isStory(ea)){var fa=this.getHeadline(ea);fa&&n.set(fa);}}});e.exports=ca;});
__d("FeedKeyboardController",["Class","CSS","DOM","DOMQuery","FeedBaseKeyboardController","Parent","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('CSS'),i=b('DOM'),j=b('DOMQuery'),k=b('FeedBaseKeyboardController'),l=b('Parent'),m=b('copyProperties');function n(o){this.parent.construct(this,o);}g.extend(n,k);m(n.prototype,{getStories:function(){return i.scry(this.root,'li.uiStreamStory');},getParentStory:function(o){return l.byClass(o,'uiStreamStory');},isStory:function(o){return h.hasClass(o,'uiStreamStory');},getHeadline:function(o){return j.scry(o,'h5.uiStreamHeadline')[0];},clickLike:function(){this.click('.UFILikeLink');},clickComment:function(){this.click('.comment_link');},getPreviousStory:function(o){return o.previousSibling;},getNextStory:function(o){return o.nextSibling;},setSelected:function(o){var p=j.scry(o,'.selectedStoryIndicator');if(!p.length)i.prependContent(o,i.create('div',{'class':'selectedStoryIndicator'}));this.selected&&this.setTabindexOnHeadline(this.selected,'-1');this.setTabindexOnHeadline(o,'0');this.selected&&h.removeClass(this.selected,'selectedStorySimple');this.selected=o;h.addClass(this.selected,'selectedStorySimple');}});e.exports=n;});
__d("FeedTrackingAsync",["Event","collectDataAttributes","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('collectDataAttributes'),i=b('copyProperties');function j(){g.listen(document.documentElement,'AsyncRequest/send',function(event){var k=event.getTarget(),l=event.getData().request,m=l.getData(),n=h(k,['ft']);i(m,n);});}e.exports={init:j};});
__d("SubscribeButton",["Arbiter","AsyncRequest","Event"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('Event'),j={SUBSCRIBED:'FollowingUser',UNSUBSCRIBED:'UnfollowingUser',init:function(k,l,m,n,o,p){i.listen(l,'click',function(){g.inform(j.SUBSCRIBED,{profile_id:n});});g.subscribe(j.SUBSCRIBED,function(q,r){if(n===r.profile_id){if(!o)m.suppressNextMouseEnter();k.swap();if(p===true)new h().setURI('/ajax/profile/suggestions_on_following.php').setData({profileid:n}).send();}});g.subscribe(j.UNSUBSCRIBED,function(q,r){if(n===r.profile_id){k.unswap();m.hideFlyout();g.inform('SubMenu/Reset');}});},initUnsubscribe:function(k,l){i.listen(k,'click',function(){g.inform.bind(g,j.UNSUBSCRIBED,{profile_id:l}).defer();});}};e.exports=j;});
__d("GiftsBirthdayPrompt",["CSS","csx","DOM"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('csx'),i=b('DOM'),j={_recBlocks:[],_contentBlocks:[],init:function(k){var l=i.scry(k,"._52kw");for(var m=0;m<l.length;m++){var n=l[m],o=n.getAttribute('data-recipientid'),p=n.getAttribute('data-entrypoint'),q=this._key(p,o);if(!q)return;this._recBlocks[q]=i.scry(n,"._52kx")[0];this._contentBlocks[q]=i.find(n,"._52ky");}},expandGiftsLink:function(k,l,m){var n=this._key(k,l);if(!n)return;var o=this._contentBlocks[n];i.setContent(o,m);if(this._recBlocks[n])g.hide(this._recBlocks[n]);g.show(o);},_key:function(k,l){if(!k||!l)return null;return k+':'+l;}};e.exports=j;});
__d("GiftBirthdayRemindersOpportunityLogger",["AsyncRequest","Event"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Event'),i={init:function(j,k){var l=false;h.listen(j,'click',function(m){if(l)return true;l=true;new g().setURI('/ajax/gifts/birthday_reminders/log_opportunity').setData({data:k}).send();});}};e.exports=i;});
__d("AppRequestReminders",["AsyncRequest","CSS","DOM","ge"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('ge'),k=0,l={},m=1,n=j('OtherAppReqReminder'),o=function(u,v,w){l[v]={node:u,seq:m++,reqCount:w};},p=function(u){k=u;},q=function(u){return u.id.split('_')[1];},r=function(u){var v=j(u),w=v.nextSibling;if(w!==n){h.show(w);k-=l[q(w)].reqCount;}s(k);},s=function(u){new g().setURI('/ajax/reminders/update_count.php').setData({new_count:u}).setMethod('POST').send();},t=function(u,v){if(n&&v&&u>0){i.setContent(j('OtherAppReqLabel'),v);}else if(n){h.hide(n);}else h.hide(j('OtherAppReqReminder'));};f.initNode=o;f.handleRemove=r;f.updateCount=t;f.setTotalOtherCount=p;});
__d("MercuryLeftNavCountControl",["Arbiter","CSS","DOM","MercuryThreadlistConstants","MessagingTag","MercuryThreadInformer","MercuryUnreadState","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('MercuryThreadlistConstants'),k=b('MessagingTag'),l=b('MercuryThreadInformer').get(),m=b('MercuryUnreadState').get(),n=b('copyProperties'),o,p,q=function(r,s){o=r;p=s;this.render();this.listenerToken=l.subscribe('unread-updated',this.render.bind(this));this.subscriptions=[g.subscribe('onload/exit',this.cleanup.bind(this))];};n(q.prototype,{render:function(){var r=m.exceedsMaxCount(k.INBOX);if(r){i.setContent(o,j.MAX_UNREAD_COUNT);}else{var s=m.getUnreadCount(k.INBOX);i.setContent(o,s.toString());h.conditionClass(o.parentNode,'hidden_elem',s<=0);}i.setContent(p,r?'+':'');},cleanup:function(){this.subscriptions.forEach(g.unsubscribe);l.unsubscribe(this.listenerToken);}});e.exports=q;});
__d("MercuryLeftNav",["DOM","MercuryServerRequests","MercuryLeftNavCountControl"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('MercuryServerRequests').get(),i=b('MercuryLeftNavCountControl');function j(k,l){h.handleUpdate(l);var m=g.scry(k,'span.countValue')[0],n=g.scry(k,'span.maxCountIndicator')[0];new i(m,n);}e.exports=j;});
__d("startMessagingNavCountUpdater",["Class","CounterDisplay","DOM","FutureSideNav","copyProperties","createArrayFrom"],function(a,b,c,d,e,f){var g=b('Class'),h=b('CounterDisplay'),i=b('DOM'),j=b('FutureSideNav'),k=b('copyProperties'),l=b('createArrayFrom');function m(o){var p=j.getInstance().getNodeForKey('inbox');if(!p)return;var q=j.getInstance().getNodeForKey('other'),r=i.scry(q,'span.count')[0],s=i.scry(r,'span.countValue')[0],t=i.scry(r,'span.maxCountIndicator')[0];new n('other_unseen',s,r,null,null,true).setMaxCounter(o,t);}function n(){this._maxValue=null;this._maxIndicatorNode=null;var o=[this].concat(l(arguments));return this.parent.construct.apply(this.parent,o);}g.extend(n,h);k(n.prototype,{setMaxCounter:function(o,p){this._maxValue=o;this._maxIndicatorNode=p;},paint:function(){var o=this._maxValue&&this._count>this._maxValue,p=o?this._maxValue:this._count;if(this._maxIndicatorNode){i.setContent(this._maxIndicatorNode,o?'+':'');}else if(o)p=p+'+';i.setContent(this._valueNode,p);this._toggleNodes();}});e.exports=m;});
__d("legacy:messaging-nav-count",["startMessagingNavCountUpdater"],function(a,b,c,d){a.startMessagingNavCountUpdater=b('startMessagingNavCountUpdater');},3);
__d("Tour",["Arbiter","LayerDestroyOnHide","LayerHideOnEscape","copyProperties","NavigationMessage"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('LayerDestroyOnHide'),i=b('LayerHideOnEscape'),j=b('copyProperties'),k=b('NavigationMessage');function l(){if(l._instance)l._instance.setTourComplete();l._instance=this;}j(l.prototype,{tourStarted:false,tourComplete:false,_navigationBeginToken:null,_pageLeaveToken:null,steps:{},openDialog:null,init:function(){this._pageLeaveToken=g.subscribe('onload/exit',this.handleLeavePage.bind(this));this._navigationBeginToken=g.subscribe(k.NAVIGATION_BEGIN,this.handleTransition.bind(this));this.steps={};return this;},registerStep:function(m,n){m.disableBehavior(h);m.disableBehavior(i);this.steps[n]=m;m.subscribe('show',function(){m.inform('tour-dialog-show',m);});if(!this.getTourStarted())this.setTourStart();},_unsubscribeSubscriptions:function(){this._navigationBeginToken.unsubscribe();this._pageLeaveToken.unsubscribe();},handleLeavePage:function(){this._unsubscribeSubscriptions();},handleTransition:function(){this._unsubscribeSubscriptions();},handleTourStart:function(){},handleTourStop:function(){},handleTourComplete:function(){},showStep:function(m){var n=this.steps[m];if(!(this.openDialog==n))this.hideOpenDialog();if(!n)return;this.openDialog=n;n.show();},hideOpenDialog:function(){if(this.openDialog){this.openDialog.hide();this.openDialog=null;}},getTourStarted:function(){return this.tourStarted;},setTourStart:function(){this.tourStarted=true;this.handleTourStart();},setTourStop:function(){this.tourStarted=false;this.hideOpenDialog();this.handleTourStop();},setTourComplete:function(){if(this.tourComplete)return;this.setTourStop();this.tourComplete=true;this.handleTourComplete();},hideStep:function(m){var n=this.steps[m];n&&n.hide();}});j(l,{getInstance:function(){return l._instance||(l._instance=new l());}});e.exports=l;});
__d("ViewportTracking",["Arbiter","Banzai","DOMDimensions","DOMPosition","Event","NavigationMessage","Run","Style","SubscriptionsHandler","UIIntentionalStreamMessage","Vector","clickRefAction","collectDataAttributes","copyProperties","debounce","throttle"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Banzai'),i=b('DOMDimensions'),j=b('DOMPosition'),k=b('Event'),l=b('NavigationMessage'),m=b('Run'),n=b('Style'),o=b('SubscriptionsHandler'),p=b('UIIntentionalStreamMessage'),q=b('Vector'),r=b('clickRefAction'),s=b('collectDataAttributes'),t=b('copyProperties'),u=b('debounce'),v=b('throttle'),w='vpv';function x(){}t(x.prototype,{init:function(y){this.useBanzai=!!y.banzai;this.readStoryIDs={};this.minSizeToBeVisible=200;this.getDataFromConfig(y);this.isLoose=!!y.is_loose;this.maxScrollPosition=0;var z,aa=u(this.fireTimer,this.getTimeout(),this);if(this.isLoose){this.minSizeToBeVisible=0;z=v(function(){this.maxScrollPosition=Math.max(this.maxScrollPosition,q.getScrollPosition().y);aa();}.bind(this));}else z=aa;this.fireTimer();this.subscriptions=new o();this.subscriptions.addSubscriptions(k.listen(window,'scroll',z),k.listen(window,'resize',z),g.subscribe(p.UPDATE_HTML_CONTENT,z),g.subscribe(l.NAVIGATION_BEGIN,this.cleanup.bind(this)));m.onLeave(this.cleanup.bind(this));},cleanup:function(){this.subscriptions.release();this.subscriptions=null;},fireTimer:function(){this.getStoriesInView().forEach(this.markStoryRead.bind(this));},getStoriesInView:function(){var y=this.getAllStories(),z=[],aa=false;for(var ba=0;ba<y.length;ba++){var ca=y[ba],da=this.getStoryID(ca);if(this.hasBeenVisible(da))continue;if(this.isVisible(ca)){z.push(ca);aa=true;}else if(aa)break;}return z;},hasBeenVisible:function(y){return y in this.readStoryIDs;},isVisible:function(y){var z=q.getScrollPosition().y,aa=i.getViewportDimensions().height,ba=j.getElementPosition(y),ca=i.getElementDimensions(y),da=aa+this.maxScrollPosition-z;if(!ba.x&&!ba.y&&!ca.x&&!ca.y)return false;if(this.isLoose&&ba.y<da)return true;var ea=Math.max(ba.y,0),fa=Math.min(ba.y+ca.height,aa),ga=Math.min(ca.height,this.minSizeToBeVisible);return (fa-ea)>=ga;},markStoryRead:function(y){var z=this.getStoryID(y);if(!z||this.hasBeenVisible(z))return;this.readStoryIDs[z]=true;var aa;if(this.useBanzai){var ba=s(y,['ft']);aa=this.getDataToLog(y);t(aa.ft,ba.ft);delete aa.ei;h.post('feed_tracking',aa);}else{aa=this.getDataToLog(y);r(w,y,null,'FORCE',aa);}}});e.exports=x;});
__d("collectSubtreeData",[],function(a,b,c,d,e,f){function g(i,j,k,l,m){if(i.offsetWidth===0&&i.offsetHeight===0)return m;var n={};if(i.getAttribute)for(r=0;r<j.length;r++){t=j[r];var o=i.getAttribute(k[t]);if(o){n[t]={};var p=JSON.parse(o);for(var q in l)if(p[q]!==undefined){n[t][q]=true;if(m[t]===undefined)m[t]={};if(m[t][q]===undefined)m[t][q]=[];if(l[q].length>0)m[t][q].push(l[q]);m[t][q].push('('+p[q]);}}}for(var r=0;r<i.childNodes.length;r++){var s=i.childNodes[r];g(s,j,k,l,m);}for(var t in n)for(var u in n[t]){var v=m[t][u][m[t][u].length-1];if(v.length>0&&v.charAt(0)=='('){m[t][u][m[t][u].length-1]=v.substr(1);}else m[t][u].push(')');}return m;}function h(i,j){var k={};for(var l=0;l<j.length;++l)k[j[l]]='data-'+j[l];var m={tn:"","tn-debug":","},n={};g(i,j,k,m,n);for(var o in n)for(var p in n[o])n[o][p]=n[o][p].join('');return n;}e.exports=h;});
__d("recordTNTreeData",["collectSubtreeData"],function(a,b,c,d,e,f){var g=b('collectSubtreeData');function h(i,j){var k={},l=g(i,['ft']);for(var m in l.ft){k[m+'_tree']=l.ft[m];if(m==='tn-debug')i.setAttribute('tn-debug_subtree',l.ft[m]);}k.evt_value=i.offsetHeight;if(j)k.offset=Math.max(0,i.offsetTop-j.offsetTop);return k;}e.exports=h;});
__d("PageFanning",["Animation","AsyncRequest","CSS","DOM","FutureSideNav","Parent","URI","$","copyProperties"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOM'),k=b('FutureSideNav'),l=b('Parent'),m=b('URI'),n=b('$'),o=b('copyProperties'),p={setFanStatus:function(r,s,t,u,v,w,x){v=v||function(aa){var ba=aa.getPayload();if(!ba||!r)return;if(ba.reload){p.reloadOnFanStatusChanged(ba.preserve_tab);}else q(r,ba);};var y={fbpage_id:s,add:t,reload:u};if(x!=null)o(y,x);var z=new h().setURI('/ajax/pages/fan_status.php').setData(y).setNectarModuleDataSafe(r).setHandler(v);if(w)z.setErrorHandler(w);z.send();return false;},reloadOnFanStatusChanged:function(r){var s=m.getRequestURI();if(r){var t=k.getInstance().selected.textKey;if(!s.getQueryData().sk&&t)s.addQueryData({sk:t});}window.location.href=s;},toggleLikeOnFanStatusChanged:function(r,s){var t=n('liked_pages_like_action_'+r),u=n('liked_pages_undo_action_'+r);i.conditionClass(t,'hidden_elem',s);i.conditionClass(u,'hidden_elem',!s);},informPageLikeButtonOnChange:function(r,s){var t=a.PageLikeButton;if(t)if(s){t.informLike(r);t.informLikeSuccess(r);}else t.informUnlike(r);}};function q(r,s){var t=s.feedback;if(!t)return;if(l.byClass(r,'fbTimelineEscapeSectionItem'))r=l.byClass(r,'fan_status_inactive')||r;var u=j.create('span',{className:'fan_status_inactive'},t);r.parentNode.replaceChild(u,r);var v=function(){if(s.can_repeat_action)u.parentNode.replaceChild(r,u);};new g(u).duration(3000).checkpoint().to('backgroundColor','#FFFFFF').duration(1000).ondone(v).go();}e.exports=p;});
__d("PageLikeButton",["Arbiter","AsyncRequest","AsyncResponse","Event","PageFanning","SubscribeButton","Tour","URI"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('AsyncResponse'),j=b('Event'),k=b('PageFanning'),l=b('SubscribeButton'),m=b('Tour'),n=b('URI'),o={LIKED:'liked',UNLIKED:'unliked',LIKED_SUCCESS:'liked_success',init:function(r,s,t,u,v,w,x,y,z,aa,ba){g.subscribe(o.LIKED,function(ca,da){if(u===da.profile_id){if(!z)t.suppressNextMouseEnter();r.swap(ba);if(aa===true)new h().setURI('/ajax/pages/suggestions_on_liking.php').setData({pageid:u}).send();}});g.subscribe(o.UNLIKED,function(ca,da){if(u===da.profile_id){r.unswap(ba);t.hideFlyout();}});if(y)g.subscribe(o.LIKED_SUCCESS,function(ca,da){var ea=n.getRequestURI().getQueryData().app_data;if(da.profile_id==u)new h().setURI('/ajax/pages/fetch_app_column.php').setData({profile_id:u,tab_key:y,app_data:ea}).send();});j.listen(s,'click',q.bind(null,u,v,w,x));},initCallout:function(r,s){var t=document.getElementById('pageActionLikeCalloutButton');j.listen(t,'click',q.bind(null,r,s));},initUnlike:function(r,s,t){j.listen(r,'click',function(event){p(event.getTarget(),s,false,function(u){g.inform(o.LIKED,{profile_id:s});i.defaultErrorHandler(u);},t);o.informUnlike(s);});},informLike:function(r){var s={profile_id:r};g.inform(o.LIKED,s);g.inform(l.SUBSCRIBED,s);},informLikeSuccess:function(r){var s={profile_id:r};g.inform(o.LIKED_SUCCESS,s);},informUnlike:function(r){var s={profile_id:r};g.inform.bind(g,o.UNLIKED,s).defer();g.inform.bind(g,l.UNSUBSCRIBED,s).defer();}};function p(r,s,t,u,v,w,x){m.getInstance().hideStep('low_page_likes');k.setFanStatus(r,s,t,false,function(){o.informLikeSuccess(s);},u,{fan_origin:v,fan_source:w,cat:x});}function q(r,s,t,u,event){p(event.getTarget(),r,true,function(v){g.inform(o.UNLIKED,{profile_id:r});i.defaultErrorHandler(v);},s,t,u);o.informLike(r);}e.exports=o;a.PageLikeButton=o;});
__d("legacy:PageLikeButton",["PageLikeButton"],function(a,b,c,d){a.PageLikeButton=b('PageLikeButton');},3);
__d("PlaceActionLink",["AsyncRequest","Dialog"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Dialog'),i={start_claim_link:function(j){var k=new g().setMethod('POST').setURI('/ajax/places/claim/start_claim.php').setData({id:j});new h().setAsync(k).show();return false;},refer_claim_link:function(j){var k=new g().setMethod('POST').setURI('/ajax/places/claim/refer_claim.php').setData({id:j});new h().setAsync(k).show();return false;}};e.exports=i;});
__d("legacy:place-action-link",["PlaceActionLink"],function(a,b,c,d){a.PlaceActionLink=b('PlaceActionLink');},3);
__d("AppRequestRemindersMenu",["DOMQuery","CSS","Form"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h=b('CSS'),i=b('Form'),j={init:function(k,l,m){var n=m.getTriggerElem();m=m.getPopover();m.subscribe(['show','hide'],function(o){var p=g.find(n,'^.fbRemindersRemove');h.conditionClass(p,'openMenu',o=='show');});l.subscribe('itemclick',function(o,p){var q=p.item.getValue();if(q){var r={};r[q]=true;i.createHiddenInputs(r,k);i.bootstrap(k);}});}};e.exports=j;});
__d("ReminderStory",["Event","DOMQuery"],function(a,b,c,d,e,f){var g=b('Event'),h=b('DOMQuery');function i(j,k){g.listen(j,'click',function(l){k.show();});k.subscribe('aftershow',function(){var l=k.getRoot(),m=h.scry(l,'.inlineReplyTextArea');if(m.length>0)m[0].focus();});}e.exports=i;});
__d("StreamViewportTracking",["Class","DOM","ViewportTracking","$","copyProperties","ge","recordTNTreeData"],function(a,b,c,d,e,f){var g=b('Class'),h=b('DOM'),i=b('ViewportTracking'),j=b('$'),k=b('copyProperties'),l=b('ge'),m=b('recordTNTreeData'),n=51;function o(){this.parent.construct(this);}g.extend(o,i);k(o.prototype,{getDataFromConfig:function(p){this.recordTNTree=p.record_tn_tree;this.timeout=p.record_delay;},getTimeout:function(){return this.timeout;},getAllStories:function(){return h.scry(j('home_stream'),'.uiStreamStory');},getStoryID:function(p){var q=JSON.parse(p.getAttribute('data-ft'));return q.mf_story_key;},getDataToLog:function(p){var q={};if(this.recordTNTree){var r=l('home_stream');q=m(p,r);}q.evt=n;return {ft:q};}});e.exports.init=function(p){(new o()).init(p);};});
__d("legacy:UIIntentionalStream-message",["UIIntentionalStreamMessage"],function(a,b,c,d){a.UIIntentionalStreamMessage=b('UIIntentionalStreamMessage');},3);
__d("legacy:UIIntentionalStreamRefresh",["UIIntentionalStreamRefresh"],function(a,b,c,d){a.UIIntentionalStreamRefresh=b('UIIntentionalStreamRefresh');},3);
__d("SwapButton",["Event","Arbiter","copyProperties","CSS"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('copyProperties'),j=b('CSS');function k(l,m,n){this._swapperButton=l;this._swappeeButton=m;g.listen(l,'click',this.swap.bind(this));if(n)g.listen(m,'click',this.unswap.bind(this));h.subscribe('SwapButton/focusOnJoinButton',this.setFocusOnSwapper.bind(this),h.SUBSCRIBE_ALL);}i(k.prototype,{_swapperButton:null,_swappeeButton:null,swap:function(l){j.hide(this._swapperButton);j.show(this._swappeeButton);l!==false&&this._swappeeButton.focus();},unswap:function(l){j.show(this._swapperButton);j.hide(this._swappeeButton);l!==false&&this._swapperButton.focus();},toggle:function(){j.toggle(this._swapperButton);j.toggle(this._swappeeButton);},setFocusOnSwapper:function(){this._swapperButton.focus();}});e.exports=k;});
__d("HoverButton",["AsyncRequest","CSS","DOM","URI","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('URI'),k=b('copyProperties'),l=b('cx');function m(n,o,p,q){this._button=n;this._flyout=o;this._flyoutAjaxify=q;this._flyoutContent=p;o.subscribe('show',this._onShow.bind(this));o.subscribe('hide',this._onHide.bind(this));}k(m.prototype,{_button:null,_flyout:null,_flyoutAjaxify:null,_flyoutContent:null,showFlyoutBriefly:function(){this.showFlyout();this._flyout.hideFlyoutDelayed(5000);},showFlyout:function(){this._flyout.showFlyout(this._button,true);this._flyout.inform('show',this._button);},hideFlyout:function(){this._flyout.hideFlyout(true);this._flyout.inform('hide',this._button);},enableButton:function(){this._flyout.initNode(this._button);},disableButton:function(){this.hideFlyout();this._flyout.deactivateNode(this._button);},_onShow:function(n,o){h.addClass(o,"_52nd");if(h.hasClass(o,'uiButton')||h.hasClass(o,"_42fu"))h.addClass(o,'selected');if(this._flyoutAjaxify){h.addClass(this._flyoutContent,'async_saving');new g().setURI(new j(this._flyoutAjaxify)).setHandler(function(p){h.removeClass(this._flyoutContent,'async_saving');i.setContent(this._flyoutContent,p.payload);}.bind(this)).send();this._flyoutAjaxify=null;}},_onHide:function(n,o){h.removeClass(o,"_52nd");if(h.hasClass(o,'uiButton')||h.hasClass(o,"_42fu"))h.removeClass(o,'selected');},destroy:function(){this.hideFlyout();this._flyout.destroy();},suppressNextMouseEnter:function(){this._flyout.setActiveNode(this._button);}});e.exports=m;});